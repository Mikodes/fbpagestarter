(function(e){"use strict";e.fn.fbStarter=function(i){var t=e.extend({appId:"",pageId:"",status:!0,cookie:!0,xfbml:!0,locales:"en_US",canvasUrl:"",frictionlessRequests:!0,activeFangate:!1,likedPage:"like-wrapper",unlikePage:"unlike-wrapper",permissionsSuccess:function(){},permissionsFail:function(){},dialogSuccess:function(){},dialogFail:function(){}},i);if(window.fbInit=window.fbInit||!1,window.fbInit)return e(document).trigger("fb:initialized"),t.xfbml&&FB.XFBML.parse(),void 0;window.fbAsyncInit=function(){window.fbInit=!0,e(document).trigger("fb:initializing"),FB.init(t),e(document).trigger("fb:initialized"),FB.Canvas.setDoneLoading(function(){FB.Canvas.setSize({height:600}),setTimeout("FB.Canvas.setAutoGrow()",300)}),t.activeFangate&&FB.getLoginStatus(function(i){if("connected"===i.status){var a=i.authResponse.userID,n=t.pageId,s="SELECT uid FROM page_fan WHERE page_id ="+n+" and uid="+a,o=FB.Data.query(s);o.wait(function(i){1===i.length&&i[0].uid===a?e("#"+t.likedPage).show():e("#"+t.unlikePage).show()})}else e("#"+t.askPermission).show()})};var a="fb-root";if(!document.getElementById(a)){var n=document.createElement("div");n.id=a,document.body.appendChild(n)}var s,o="facebook-jssdk";return document.getElementById(o)||(s=document.createElement("script"),s.id=o,s.async=!0,s.src="//connect.facebook.net/"+t.locales+"/all.js",document.getElementsByTagName("head")[0].appendChild(s)),this.each(function(){function i(){var i=t.canvasUrl+"install_to_page.html";FB.ui({method:"pagetab",redirect_uri:i},function(i){null!==i&&null!==i.tabs_added?e.each(i.tabs_added,function(i){FB.api(i,function(){e("#msg").text("Your tab has already been installed")})}):e("#msg").text("Action cancelled, unable to install a page")})}function a(i){FB.login(function(i){i.authResponse?e.isFunction(t.permissionsSuccess)&&t.permissionsSuccess.call(this):e.isFunction(t.permissionsFail)&&t.permissionsFail.call(this)},{scope:i})}function n(i){FB.ui(i,function(i){i&&i.post_id?e.isFunction(t.dialogSuccess)&&t.dialogSuccess.call(this):e.isFunction(t.dialogFail)&&t.dialogFail.call(this)})}e(".fb-dialog").on("click",function(t){t.preventDefault();var s,o=e(this).data("fbactiontype");switch(o){case"add_page_tab":i();break;case"permissions":var c=e(this).data("permissions");a(c);break;case"share":s={method:"feed",link:e(this).data("link"),picture:e(this).data("picture"),title:e(this).data("title"),caption:e(this).data("caption"),description:e(this).data("description")},n(s);break;case"requests":s={method:"apprequests",message:e(this).data("message")},n(s);break;case"send":s={method:"send",name:e(this).data("name"),picture:e(this).data("picture"),link:e(this).data("link")},n(s)}})})}})(jQuery);
