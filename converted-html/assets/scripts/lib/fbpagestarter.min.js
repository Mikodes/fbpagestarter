(function(e){var n;e.fn.fbStarter=function(n,t){var i=e.extend({appId:n,pageId:"",status:true,cookie:true,xfbml:true,locales:"en_US",activeFangate:true,unlikePage:"unlike",likedPage:"like",channelUrl:""},t);window.fbInit=window.fbInit||false;if(window.fbInit){e(document).trigger("fb:initialized");if(i.xfbml){FB.XFBML.parse()}return}window.fbAsyncInit=function(){window.fbInit=true;e(document).trigger("fb:initializing");FB.init(i);e(document).trigger("fb:initialized");if(i.activeFangate){FB.getLoginStatus(function(n){if(n.status=="connected"){var t=n.authResponse.userID;var o=i.pageId;var a="SELECT uid FROM page_fan WHERE page_id ="+o+" and uid="+t;var l=FB.Data.query(a);l.wait(function(n){if(n.length==1&&n[0].uid==t){console.log("liked:");e("#"+i.likedPage).show()}else{console.log("not like yet");e("#"+i.unlikePage).show()}})}else{console.log("not login")}})}};var o="fb-root";if(!document.getElementById(o)){var a=document.createElement("div");a.id=o;document.body.appendChild(a)}var l,c="facebook-jssdk";if(!document.getElementById(c)){l=document.createElement("script");l.id=c;l.async=true;l.src="//connect.facebook.net/"+i.locales+"/all.js";document.getElementsByTagName("head")[0].appendChild(l)}e(".jsAddToPage").on("click",function(n){n.preventDefault();FB.ui({method:"pagetab",redirect_uri:"http:"+$canvas_url+"install_to_page.html"},function(n){if(n!=null&&n.tabs_added!=null){e.each(n.tabs_added,function(e){FB.api(e,function(e){alert("redirect to "+e.link)})})}else{alert("Unable to install")}})});e(".jsFbShare").on("click",function(n){n.preventDefault();var t={method:"feed",link:e(this).data("link"),picture:e(this).data("pic"),title:e(this).data("title"),caption:e(this).data("caption"),description:e(this).data("description")};FB.ui(t)});e(".jsAskPermissions").on("click",function(n){n.preventDefault();var t=e(this).data("permissions");FB.login(function(e){if(e.authResponse){console.log("Welcome!  Fetching your information.... ");FB.api("/me",function(e){console.log("Good to see you, "+e.name+".")})}else{console.log("User cancelled login or did not fully authorize.")}},{scope:t})});e(document).on("load",function(e){console.log("is parent");FB.login(function(e){console.log("is fb");if(e.session){var n=e.session.uid;var t="109403935810224";var i="SELECT uid FROM page_fan WHERE page_id = "+t+"and uid="+n;var o=FB.Data.query(i);o.wait(function(e){if(e.length==1&&e[0].uid==n){console.log("is login")}else{console.log("row=0")}})}else{console.log("not login")}})});function s(){var n=setInterval(function(){var n=e("body").outerHeight(true);FB.Canvas.setSize({width:810,height:n})},1e3);setTimeout(function(){clearInterval(n)},4e3)}}})(jQuery);