(function(e){e.fn.fbStarter=function(i){var t=e.extend({appId:"",pageId:"",status:true,cookie:true,xfbml:true,locales:"en_US",canvasUrl:"",frictionlessRequests:true,activeFangate:false,likedPage:"like-wrapper",unlikePage:"unlike-wrapper",permissionsSuccess:function(){},permissionsFail:function(){},dialogSuccess:function(){},dialogFail:function(){}},i);var a=t.canvasUrl+"/channel.html";window.fbInit=window.fbInit||false;if(window.fbInit){e(document).trigger("fb:initialized");if(t.xfbml){FB.XFBML.parse()}return}window.fbAsyncInit=function(){window.fbInit=true;e(document).trigger("fb:initializing");FB.init(t);e(document).trigger("fb:initialized");FB.Canvas.setAutoGrow();if(t.activeFangate){FB.getLoginStatus(function(i){if(i.status=="connected"){var a=i.authResponse.userID;var n=t.pageId;var s="SELECT uid FROM page_fan WHERE page_id ="+n+" and uid="+a;var c=FB.Data.query(s);c.wait(function(i){if(i.length==1&&i[0].uid==a){e("#"+t.likedPage).show()}else{e("#"+t.unlikePage).show()}})}else{console.log("not login")}})}};var n="fb-root";if(!document.getElementById(n)){var s=document.createElement("div");s.id=n;document.body.appendChild(s)}var c,o="facebook-jssdk";if(!document.getElementById(o)){c=document.createElement("script");c.id=o;c.async=true;c.src="//connect.facebook.net/"+t.locales+"/all.js";document.getElementsByTagName("head")[0].appendChild(c)}return this.each(function(){var i=e(this);e(".fb-dialog").click(function(i){i.preventDefault();var t=e(this).data("fbactiontype");switch(t){case"add_page_tab":a();break;case"permissions":var c=e(this).data("permissions");n(c);break;case"share":var o={method:"feed",link:e(this).data("link"),picture:e(this).data("picture"),title:e(this).data("title"),caption:e(this).data("caption"),description:e(this).data("description")};s(o);break;case"requests":var o={method:"apprequests",message:e(this).data("message")};s(o);break;case"send":var o={method:"send",name:e(this).data("name"),picture:e(this).data("picture"),link:e(this).data("link")};s(o);break}});function a(){var i=t.canvasUrl+"install_to_page.html";FB.ui({method:"pagetab",redirect_uri:i},function(i){if(i!=null&&i.tabs_added!=null){e.each(i.tabs_added,function(i){FB.api(i,function(i){e("#msg").text("Your tab has already been installed")})})}else{e("#msg").text("Action cancelled, unable to install a page")}})}function n(i){FB.login(function(i){if(i.authResponse){if(e.isFunction(t.permissionsSuccess)){t.permissionsSuccess.call(this)}}else{if(e.isFunction(t.permissionsFail)){t.permissionsFail.call(this)}}},{scope:i})}function s(i){FB.ui(i,function(i){if(i&&i.post_id){if(e.isFunction(t.dialogSuccess)){t.dialogSuccess.call(this)}}else{if(e.isFunction(t.dialogFail)){t.dialogFail.call(this)}}})}})}})(jQuery);