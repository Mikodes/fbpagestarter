(function(e){var t;e.fn.fbStarter=function(t,n){var i=e.extend({appId:t,status:true,cookie:true,xfbml:true,locales:"en_US",channelUrl:""},n);window.fbInit=window.fbInit||false;if(window.fbInit){e(document).trigger("fb:initialized");if(i.xfbml){FB.XFBML.parse()}return}window.fbAsyncInit=function(){window.fbInit=true;e(document).trigger("fb:initializing");FB.init(i);e(document).trigger("fb:initialized")};var o="fb-root";if(!document.getElementById(o)){var a=document.createElement("div");a.id=o;document.body.appendChild(a)}var l,c="facebook-jssdk";if(!document.getElementById(c)){l=document.createElement("script");l.id=c;l.async=true;l.src="//connect.facebook.net/"+i.locales+"/all.js";document.getElementsByTagName("head")[0].appendChild(l)}e(".jsAddToPage").on("click",function(t){t.preventDefault();FB.ui({method:"pagetab",redirect_uri:"http:"+$canvas_url+"install_to_page.html"},function(t){if(t!=null&&t.tabs_added!=null){e.each(t.tabs_added,function(e){FB.api(e,function(e){alert("redirect to "+e.link)})})}else{alert("Unable to install")}})});e(".jsFbShare").on("click",function(t){t.preventDefault();var n={method:"feed",link:e(this).data("link"),picture:e(this).data("pic"),title:e(this).data("title"),caption:e(this).data("caption"),description:e(this).data("description")};FB.ui(n)});e(".jsAskPermissions").on("click",function(t){t.preventDefault();var n=e(this).data("permissions");FB.login(function(e){if(e.authResponse){console.log("Welcome!  Fetching your information.... ");FB.api("/me",function(e){console.log("Good to see you, "+e.name+".")})}else{console.log("User cancelled login or did not fully authorize.")}},{scope:n})});e(document).on("load",function(e){console.log("is parent");FB.login(function(e){console.log("is fb");if(e.session){var t=e.session.uid;var n="109403935810224";var i="SELECT uid FROM page_fan WHERE page_id = "+n+"and uid="+t;var o=FB.Data.query(i);o.wait(function(e){if(e.length==1&&e[0].uid==t){console.log("is login")}else{console.log("row=0")}})}else{console.log("not login")}})});function s(){var t=setInterval(function(){var t=e("body").outerHeight(true);FB.Canvas.setSize({width:810,height:t})},1e3);setTimeout(function(){clearInterval(t)},4e3)}}})(jQuery);