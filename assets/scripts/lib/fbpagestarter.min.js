(function(e){"use strict";e.fn.fbStarter=function(t){var i=e.extend({appId:"",pageId:"",status:!0,cookie:!0,xfbml:!0,locales:"en_US",canvasUrl:"",frictionlessRequests:!0,autoResize:!0,activeFangate:!1,likedPage:"like-wrapper",unlikePage:"unlike-wrapper",permissionsSuccess:function(){},permissionsFail:function(){},dialogSuccess:function(){},dialogFail:function(){}},t);if(window.fbInit=window.fbInit||!1,window.fbInit)return e(document).trigger("fb:initialized"),i.xfbml&&FB.XFBML.parse(),void 0;window.fbAsyncInit=function(){window.fbInit=!0,e(document).trigger("fb:initializing"),FB.init(i),e(document).trigger("fb:initialized"),i.autoResize===!0&&FB.Canvas.setDoneLoading(function(){FB.Canvas.setSize({height:600}),setTimeout("FB.Canvas.setAutoGrow();",300)}),i.activeFangate&&FB.getLoginStatus(function(t){if("connected"===t.status){var a=t.authResponse.userID,n=i.pageId,s="SELECT uid FROM page_fan WHERE page_id ="+n+" and uid="+a,o=FB.Data.query(s);o.wait(function(t){1===t.length&&t[0].uid===a?e("#"+i.likedPage).show():e("#"+i.unlikePage).show()})}else e("#"+i.askPermission).show()})};var a="fb-root";if(!document.getElementById(a)){var n=document.createElement("div");n.id=a,document.body.appendChild(n)}var s,o="facebook-jssdk";return document.getElementById(o)||(s=document.createElement("script"),s.id=o,s.async=!0,s.src="//connect.facebook.net/"+i.locales+"/all.js",document.getElementsByTagName("head")[0].appendChild(s)),this.each(function(){function t(){var t=i.canvasUrl+"install_to_page.html";FB.ui({method:"pagetab",redirect_uri:t},function(t){null!==t&&null!==t.tabs_added?e.each(t.tabs_added,function(t){FB.api(t,function(){e("#msg").text("Your tab has already been installed")})}):e("#msg").text("Action cancelled, unable to install a page")})}function a(t){FB.login(function(t){t.authResponse?e.isFunction(i.permissionsSuccess)&&i.permissionsSuccess.call(this):e.isFunction(i.permissionsFail)&&i.permissionsFail.call(this)},{scope:t})}function n(t){FB.ui(t,function(t){t&&t.post_id?e.isFunction(i.dialogSuccess)&&i.dialogSuccess.call(this):e.isFunction(i.dialogFail)&&i.dialogFail.call(this)})}e(".fb-dialog").on("click",function(i){i.preventDefault();var s,o=e(this).data("fbactiontype");switch(o){case"add_page_tab":t();break;case"permissions":var c=e(this).data("permissions");a(c);break;case"share":s={method:"feed",link:e(this).data("link"),picture:e(this).data("picture"),title:e(this).data("title"),caption:e(this).data("caption"),description:e(this).data("description")},n(s);break;case"requests":s={method:"apprequests",message:e(this).data("message")},n(s);break;case"send":s={method:"send",name:e(this).data("name"),picture:e(this).data("picture"),link:e(this).data("link")},n(s)}}),e(".fb-scrollto").on("click",function(t){t.preventDefault(t);var i=e(this).data("offset"),a=e(this).data("speed");FB.Canvas.getPageInfo(function(t){e({y:t.scrollTop}).animate({y:i},{duration:a,step:function(e){FB.Canvas.scrollTo(0,e)}})})}),e(".fb-setsize").on("click",function(t){t.preventDefault(t);var i=e(this).data("height");e(this).data("width"),FB.Canvas.setSize({width:810,height:i})}),e(".fb-autosize").on("click",function(e){e.preventDefault(e),FB.Canvas.setDoneLoading(function(){FB.Canvas.setSize({height:600}),setTimeout("FB.Canvas.setAutoGrow();",300)})})})}})(jQuery);
