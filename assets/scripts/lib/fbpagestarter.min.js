(function(e){e.fn.fbStarter=function(i){var t=e.extend({appId:"",pageId:"",status:true,cookie:true,xfbml:true,locales:"en_US",activeFangate:false,likedPage:"like-wrapper",unlikePage:"unlike-wrapper",canvasUrl:"",callbackFunction:""},i);var n=t.canvasUrl+"/channel.html";window.fbInit=window.fbInit||false;if(window.fbInit){e(document).trigger("fb:initialized");if(t.xfbml){FB.XFBML.parse()}return}window.fbAsyncInit=function(){window.fbInit=true;e(document).trigger("fb:initializing");FB.init(t);e(document).trigger("fb:initialized");if(t.activeFangate){FB.getLoginStatus(function(i){if(i.status=="connected"){var n=i.authResponse.userID;var a=t.pageId;var o="SELECT uid FROM page_fan WHERE page_id ="+a+" and uid="+n;var l=FB.Data.query(o);l.wait(function(i){if(i.length==1&&i[0].uid==n){e("#"+t.likedPage).show()}else{e("#"+t.unlikePage).show()}})}else{console.log("not login")}})}};var a="fb-root";if(!document.getElementById(a)){var o=document.createElement("div");o.id=a;document.body.appendChild(o)}var l,c="facebook-jssdk";if(!document.getElementById(c)){l=document.createElement("script");l.id=c;l.async=true;l.src="//connect.facebook.net/"+t.locales+"/all.js";document.getElementsByTagName("head")[0].appendChild(l)}e(".fb-dialog").on("click",function(i){i.preventDefault();$dialogType=e(this).data("fbtype");if($dialogType=="addtab")console.log($dialogType);FB.ui({method:"pagetab",redirect_uri:"http:"+t.canvasUrl+"install_to_page.html"},function(i){if(i!=null&&i.tabs_added!=null){e.each(i.tabs_added,function(e){FB.api(e,function(e){alert("redirect to "+e.link)})})}else{alert("Unable to install")}});if($dialogType=="share")console.log($dialogType);var n={method:"feed",link:e(this).data("link"),picture:e(this).data("pic"),title:e(this).data("title"),caption:e(this).data("caption"),description:e(this).data("description")};FB.ui(n);if($dialogType=="permissions")console.log($dialogType);var a=e(this).data("permissions");FB.login(function(e){if(e.authResponse){console.log("Welcome!  Fetching your information.... ");FB.api("/me",function(e){console.log("Good to see you, "+e.name+".")})}else{console.log("User cancelled login or did not fully authorize.")}},{scope:a})});return this.each(function(){if(e.isFunction(t.callbackFunction)){t.callbackFunction.call(this)}})}})(jQuery);